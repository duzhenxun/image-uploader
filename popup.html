<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ImageHost Uploader</title>
  <link rel="stylesheet" href="styles.css">
  <script src="libs/crypto-js.min.js"></script>
  <script src="libs/aliyun-oss.min.js"></script>
  <script src="libs/qiniu.min.js"></script>
</head>
<body>
  <div class="container">
    <div id="updateBanner" class="update-banner" style="display: none;">
      <div class="update-content">
        <span>🎉 新版本可用！</span>
        <span id="updateVersion"></span>
      </div>
      <div class="update-actions">
        <button id="updateBtn" class="update-btn">更新</button>
        <button id="updateCloseBtn" class="update-close-btn">✕</button>
      </div>
    </div>

    <div class="header">
      <h1>ImageHost Uploader</h1>
      <div class="header-buttons">
        <button id="settingsBtn">⚙️</button>
        <button id="closeBtn" class="close-btn">✕</button>
      </div>
    </div>

    <div id="mainView">
      <div class="upload-area" id="dropZone">
        <p>拖放图片到这里或点击上传</p>
        <input type="file" id="fileInput" multiple accept="image/*" style="display: none;">
      </div>
      <div class="paste-hint">
        <p>您也可以直接粘贴图片 (Ctrl+V)</p>
      </div>
      <div id="uploadList"></div>
    </div>

    <div id="settingsView" style="display: none;">
      <h2>图床设置</h2>
      <div class="service-select">
        <select id="serviceType">
          <option value="aliyun">阿里云 OSS</option>
          <option value="qiniu">七牛云</option>
          <option value="imgur">Imgur</option>
          <option value="custom">自定义</option>
        </select>
      </div>

      <div id="aliyunConfig" class="service-config">
        <input type="text" id="aliyunAccessKey" placeholder="Access Key">
        <input type="password" id="aliyunSecretKey" placeholder="Secret Key">
        <input type="text" id="aliyunBucket" placeholder="Bucket">
        <input type="text" id="aliyunRegion" placeholder="Region">
      </div>

      <div id="qiniuConfig" class="service-config" style="display: none;">
        <input type="text" id="qiniuAccessKey" placeholder="Access Key">
        <input type="password" id="qiniuSecretKey" placeholder="Secret Key">
        <input type="text" id="qiniuBucket" placeholder="Bucket">
        <input type="text" id="qiniuDomain" placeholder="Domain">
      </div>

      <div id="imgurConfig" class="service-config" style="display: none;">
        <input type="text" id="imgurClientId" placeholder="Client ID">
      </div>

      <div id="customConfig" class="service-config" style="display: none;">
        <input type="text" id="customApiUrl" placeholder="上传 API 地址">
        <input type="text" id="customHeaders" placeholder="自定义请求头 (JSON)">
        <input type="text" id="customResponsePath" placeholder="返回 URL 路径 (例: data.url)">
      </div>

      <button id="saveSettings">保存设置</button>
    </div>
  </div>
  <script src="popup.js"></script>
</body>
</html>
